{{- range $name, $values := $.Values.configMaps }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ tpl $name $ }}
  labels:
    {{- include "helm_chart.labels" $ | nindent 4 }}
data:
  {{- range $k, $v := $values }}
  {{ $k }}: | 
    {{- if $v.file }}
{{ $.Files.Get (tpl $v.file $) | quote | indent 4}}
    {{ else }}
{{ tpl $v.value $ | quote | indent 4}}
    {{- end }}
  {{- end }}
{{- end }}
